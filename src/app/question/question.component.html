<app-header></app-header>
<!-- <h1 class="center-align">Survey Home</h1> -->
<div class="users">
    <div class="flex-display title">
        <input type="text" placeholder="Enter title of the survey..." class="input-field" [(ngModel)] ="config.survey.title" name="title" #title="ngModel" required>
        <!-- <div *ngIf="title.invalid && title.touched" class="error-message">Please enter title of the survey.</div> -->
        <button [class.disabled]="title.invalid" (click)="createResponse=true;">Create survey</button>
    </div>
    <div class="lists bg-white" *ngIf="config.allComps.length>0">
        <h5 class="center-align">Lists of survey created</h5>
        <div class="flex-display dynamic">
            <div *ngFor="let user of config.allComps; let i=index;" class="usersList">
                <!-- <div>{{user | json}}</div> -->
                <button (click)="viewDetail(i)" class="views">{{user.title}}</button>
            </div>
        </div>
    </div>
</div>
<div class="content" *ngIf="createResponse==true">
    <div class="comps">
        <div *ngFor="let qns of qnsType" class="btns">
            <button (click)="loadComponent(qns.name)">{{qns.comp}}</button>
        </div>
    </div>
    <div class="comps2" *ngIf="components.length>0">
        <div cdkDropList class="list" (cdkDropListDropped)="drop($event)" [cdkDropListData]="components">
            <!-- <ng-container #appDynamic></ng-container> -->
            <div *ngFor="let cmp of components; let i=index" class="box bg-white" cdkDrag>
                <div *ngIf="cmp.componentType.name=='YesNoComponent'" class="each">
                    <p style="margin-bottom:-20px;">{{i+1}}</p>
                    <app-yes-no></app-yes-no>
    
                    <!-- <div><i *ngIf="!cmp.isDisable" class="disable">reorder</i>
                         <i  cdkDragHandle class="">reorder</i>
                    </div>
                    <input type="checkbox" (change)="cmp.isDisable=!cmp.isDisable"> -->
                    <button (click)="deleteComponent(i)" class="del-cmp">Delete Component</button>
                </div>
                <div *ngIf="cmp.componentType.name=='RankingComponent'" class="each">
                    <p style="margin-bottom:-20px;">{{i+1}}</p>
                    <app-ranking></app-ranking>
                
                    <button (click)="deleteComponent(i)"  class="del-cmp">Delete Component</button>
                </div>
                <div *ngIf="cmp.componentType.name=='RatingScaleComponent'" class="each">
                    <p style="margin-bottom:-20px;">{{i+1}}</p>
                    <app-rating-scale></app-rating-scale>
            
                    <button (click)="deleteComponent(i)"  class="del-cmp">Delete Component</button>
                </div>
                <div *ngIf="cmp.componentType.name=='MultiSelectComponent'" class="each">
                    <p style="margin-bottom:-20px;">{{i+1}}</p>
                    <app-multi-select></app-multi-select>
            
                    <button (click)="deleteComponent(i)"  class="del-cmp">Delete Component</button>
                </div>
                <div *ngIf="cmp.componentType.name=='MatrixComponent'" class="each">
                    <p style="margin-bottom:-20px;">{{i+1}}</p>
                    <app-matrix></app-matrix>
                    
                    <button (click)="deleteComponent(i)"  class="del-cmp">Delete Component</button>
                </div>
                <div *ngIf="cmp.componentType.name=='MixedTypeComponent'" class="each">
                    <p style="margin-bottom:-20px;">{{i+1}}</p>
                    <app-mixed-type></app-mixed-type>
                    <button (click)="deleteComponent(i)"  class="del-cmp">Delete Component</button>
                </div>
                <div *ngIf="cmp.componentType.name=='ImageChoiceComponent'" class="each">
                    <p style="margin-bottom:-20px;">{{i+1}}</p>
                    <app-image-choice></app-image-choice>
                    <button (click)="deleteComponent(i)"  class="del-cmp">Delete Component</button>
                </div>
                <div *ngIf="cmp.componentType.name=='OpenEndedComponent'" class="each"> 
                    <p style="margin-bottom:-20px;">{{i+1}}</p>
                    <app-open-ended></app-open-ended>
                    
                    <button (click)="deleteComponent(i)"  class="del-cmp">Delete Component</button>
                </div>
            </div>
        </div>
        <div class="send">
            <div *ngIf="config.allValues.length!=components.length && components.length>0" class="error-message">Please fill all selected questionarie!!!</div>
            <button [class.disabled]="config.allValues.length!=components.length && components.length>0" (click)="onSave()" routerLink="/user" *ngIf="components.length>0">Submit</button>
        </div>
    </div>
    <!-- <form [formGroup]="masterForm" (ngSubmit)="onSave()"> -->
    
    <!-- </form> -->
    <!-- masterForm = {{ masterForm.value | json }} -->
    <!-- [class.disabled]="config.allValues.length!=components.length || config.adminResponse==false"  -->
</div>
<app-footer></app-footer>